import{j as e,r as u,c as g}from"./client-Cgxip4d8.js";import{a as o}from"./axios-BimPEqV4.js";o.get("http://localhost:3001/persons").then(t=>{const n=t.data;console.log(n)});const w=t=>{t.preventDefault();const n={name:"Pedro Pe",number:"050-345778"};o.post("http://localhost:3001/persons",n).then(r=>{console.log(r)})},v=()=>e.jsx(e.Fragment,{children:e.jsx("button",{onClick:w,children:"Add person"})}),P=t=>e.jsxs("form",{onSubmit:t.addName,children:[e.jsxs("div",{children:["Name:",e.jsx("input",{name:"name",value:t.newName})]}),e.jsxs("div",{children:["Number:",e.jsx("input",{name:"number",value:t.newNumber})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",children:"Add"})})]}),N=t=>e.jsxs("div",{children:["filter shown with",e.jsx("input",{value:t.filters,onChange:t.handleFilterChange})]}),i="http://localhost:3001/persons",k=()=>o.get(i).then(n=>n.data),q=t=>o.post(i,t).then(r=>r.data),A=(t,n)=>o.put(`${i}/${t}`,n).then(h=>h.data),C=t=>o.delete(`${i}/${t}`).then(r=>r.data),l={getAll:k,create:q,update:A,deleteItem:C},y=({person:t,onDelete:n})=>e.jsxs("li",{children:[e.jsxs("span",{children:[t.name," ",t.number]})," ",e.jsx("button",{onClick:()=>{window.confirm("Do you want to delete "+t.name+"?")&&l.deleteItem(t.id).then(()=>n())},children:"Delete"})]}),F=()=>{const[t,n]=u.useState([]),[r,h]=u.useState("");u.useEffect(()=>{l.getAll().then(s=>{n(s)})},[]);const j=s=>{s.preventDefault();const d=s.target.elements.name.value,f=s.target.elements.number.value,m={name:d,number:f},c=t.find(a=>a.name===d);c?window.confirm(c.name+" is already added to phonebook, replace the old number with a new one?")&&l.update(c.id,m).then(a=>{n(t.map(x=>x.id!==c.id?x:a)),s.target.reset()}):l.create(m).then(a=>{n(t.concat(a)),s.target.reset()})},p=t.filter(s=>s.name.toLowerCase().includes(r.toLowerCase())),b=s=>{h(s.target.value)};return e.jsxs("div",{children:[e.jsx("h2",{children:"Phonebook"}),e.jsx(N,{filters:r,handleFilterChange:b}),e.jsx("h3",{children:"Add a new"}),e.jsx(P,{addName:j}),e.jsx("h2",{children:"Numbers"}),e.jsx("ul",{children:p.map(s=>e.jsx(y,{person:s,onDelete:()=>{l.getAll().then(d=>{n(d)})}},s.id))})]})},D=()=>e.jsxs("main",{children:[e.jsx("h1",{children:"Osa 2d Palvelimella olevan datan muokkaaminen"}),e.jsx("div",{className:"theory",children:e.jsx(v,{})}),e.jsx("h2",{children:"Tehtävät 2.12.-2.15."}),e.jsx("div",{className:"task",children:e.jsx(F,{})})]});g.createRoot(document.getElementById("root")).render(e.jsx(D,{}));
